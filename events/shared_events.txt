add_namespace = shared

country_event = {
    # Exercise Zapad
    # Fired from KOA "Rethenian Military Comission" focus

    id = shared.1
    title = shared.1.t
    desc = shared.1.d

    fire_only_once = no

	is_triggered_only = yes

	option = {
		name = shared.1.a
	}
}

country_event = {
	# The Agreement
	id = shared.2
	title = shared.2.t
	desc = shared.2.d

	fire_only_once = no

	is_triggered_only = yes

    immediate = {
        add_timed_idea = {
            idea = The_Agreement
            days = 1825
        }
    }

	option = {
		name = shared.2.a
	}
}

country_event = {
	# Invitation into a faction
	id = shared.3
	title = shared.3.t
	desc = shared.3.d

	fire_only_once = no

	is_triggered_only = yes

	option = {
		# Agree
		FROM = {
			add_to_faction = THIS
		}
		name = shared.3.a
	}
	option = {
		# Diagree
		name = shared.3.b
	}
}

country_event = {
	# Red Dusk
	id = shared.4
	title = shared.4.t
	desc = shared.4.d

	fire_only_once = no

	is_triggered_only = yes

	option = {
		# For KOA
		name = shared.4.a
		trigger = {
			tag = KOA
		}
		KOA = {
			declare_war_on = {
				target = RCR
				type = annex_everything
			}
			add_timed_idea = { 
				idea = KOA_Operation_Firework
				days = 90
			}
		}
	}
	option = {
		# For RCR
		name = shared.4.b
		trigger = {
			tag = RCR
		}
	}
}

news_event = {
	# The Second Great War
	id = shared.5
	title = shared.5.t
	desc = shared.5.d

	fire_only_once = no

	is_triggered_only = yes

	option = {
		name = shared.5.a
	}
}

news_event = {
	# The Third Robotnik War
	id = shared.6
	title = shared.6.t
	desc = shared.6.d

	fire_only_once = no

	is_triggered_only = yes

	option = {
		name = shared.6.a
	}
}

country_event = {
	# Getting a protection offer
	id = shared.7
	title = shared.7.t
	desc = shared.7.d

	fire_only_once = no

	is_triggered_only = yes

	option = {
		# Agree
		name = shared.7.a
		ROOT = {
			give_guarantee = FROM
		}
	}

	option = {
		# Disagree
		name = shared.7.b
	}
}

country_event = {
	# Getting a protection offer with building
	# SAM and forts.
	id = shared.8
	title = shared.8.t
	desc = shared.8.d

	fire_only_once = no

	is_triggered_only = yes

	option = {
		# Agree
		name = shared.8.a
		ROOT = {
			give_guarantee = FROM
		}
		THIS = {
			every_state = {
				limit = {
					any_neighbor_state = {
						controller = {
							is_in_faction_with = EGG
						}
						owner = {
							is_in_faction_with = EGG
						}
					}
				}
				add_building_construction = {
					type = bunker
					level = 1
					instant_build = yes
					province = {
						all_provinces = yes
					}
				}
				add_building_construction = {
					type = anti_air_building
					level = 1
					instant_build = yes
				}
			}
        	set_variable = {
				THIS.much_obliged = 1
			}
		}
	}

	option = {
		# Disagree
		name = shared.8.b
		set_variable = {
			THIS.much_obliged = -1
		}
	}
}

country_event = {
	# Getting a non-aggression pact from ROOT
	id = shared.9
	title = shared.9.t
	desc = shared.9.d

	fire_only_once = no

	is_triggered_only = yes

	option = {
		# Agree
		name = shared.9.a
		ROOT = {
			diplomatic_relation = {
				country = FROM
				relation = non_aggression_pact
				active = yes
			}
		}
	}
	option = {
		# Disagree
		name = shared.9.b
	}
}

country_event = {
	# Getting a protection offer with building
	# SAM and forts.
	# Contains answer events for the calling country.
	id = shared.10
	title = shared.10.t
	desc = shared.10.d

	fire_only_once = no

	is_triggered_only = yes

	option = {
		# Agree
		name = shared.10.a
		ROOT = {
			give_guarantee = FROM
		}
		THIS = {
			every_state = {
				add_building_construction = {
					type = bunker
					level = 1
					instant_build = yes
					province = {
						all_provinces = yes
					}
				}
				add_building_construction = {
					type = anti_air_building
					level = 1
					instant_build = yes
				}
			}
		}
	}

	option = {
		# Disagree
		name = shared.10.b
		ROOT = {
			country_event = shared.12
		}
	}
}

country_event = {
	# They agreed to take our protection!
	id = shared.11
	title = shared.11.t
	desc = shared.11.d

	fire_only_once = no

	is_triggered_only = yes

	option = {
		name = shared.11.a
	}
}

country_event = {
	# They disagreed to take our protection...
	id = shared.12
	title = shared.12.t
	desc = shared.12.d

	fire_only_once = no

	is_triggered_only = yes

	option = {
		# Require a peace
		name = shared.12.a
	}
}

country_event = {
	# Getting a derobotization help offer
	id = shared.13
	title = shared.13.t
	desc = shared.13.d

	fire_only_once = no

	is_triggered_only = yes

	# TODO: Add events for ROOT.

	option = {
		# Accept
		# TODO: There should be some kind of weakening
		name = shared.13.a
		THIS = {
			if = {
				limit = {
					check_variable = { legacy_of_deroboticization_level > 1 }
				}
				set_variable = { legacy_of_deroboticization_level_new = legacy_of_deroboticization_level }
				Switch_Legacy_of_Deroboticization = yes
				subtract_from_variable = { legacy_of_deroboticization_level = 1 }
			}
		}
	}
	option = {
		# Decline
		name = shared.13.b
	}
}

country_event = {
	# UFA gets an offer to join Freedom Accord
	id = shared.14
	title = shared.14.t
	desc = shared.14.d

	fire_only_once = no

	is_triggered_only = yes

	option = {
		# KOA waits for an answer
		name = shared.14.a
		trigger = {
			tag = KOA
		}
	}

	option = {
		# UFA accepts an offer
		name = shared.14.b
		trigger = {
			tag = UFA
		}
		country_event = shared.15
		KOA = {
			add_to_faction = UFA
			country_event = shared.15
		}
		news_event = {
			id = shared.16
			days = 1
		}
	}

	option = {
		# UFA declines an offer
		name = shared.14.c
		trigger = {
			tag = UFA
		}
		# TODO: Maybe we should add an event for KOA here?
	}
}

country_event = {
	# UFA accepts to join Freedom Accord
	id = shared.15
	title = shared.15.t
	desc = shared.15.d

	fire_only_once = no
	is_triggered_only = yes

	option = {
		name = shared.15.a
	}
}

news_event = {
	# UFA joins Freedom Accord
	id = shared.16
	title = shared.16.t
	desc = shared.16.d

	fire_only_once = no
	
	is_triggered_only = yes

	option = {
		name = shared.16.a
	}
}

news_event = {
	# The Second Great War
	id = shared.17
	title = shared.17.t
	desc = shared.17.d

	fire_only_once = no

	is_triggered_only = yes

	option = {
		name = shared.17.a
	}
}

country_event = {
	# Presidential Call
	id = shared.18
	title = shared.18.t
	desc = shared.18.d

	fire_only_once = no
	is_triggered_only = yes

	option = {
		name = shared.18.a
	}
}

country_event = {
	# Love Without Boundaries
	id = shared.19
	title = shared.19.t
	desc = shared.19.d

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		name = shared.19.a
	}
}

country_event = {
	# Concept of Friendship Between Nations
	id = shared.100
	title = shared.100.t
	desc = shared.100.d

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		name = shared.100.a
	}
}

country_event = {
	# Shared Science Upgrade
	id = shared.101
	title = shared.101.t
	desc = shared.101.d

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		name = shared.101.a
		if = {
			limit = {
				has_idea = Friendship_of_Peoples_Science_1
			}
			swap_ideas = {
				remove_idea = Friendship_of_Peoples_Science_1
				add_idea = Friendship_of_Peoples_Science_2
			}
		}
		else_if = {
			limit = {
				has_idea = Friendship_of_Peoples_Science_2
			}
			swap_ideas = {
				remove_idea = Friendship_of_Peoples_Science_2
				add_idea = Friendship_of_Peoples_Science_3
			}
		}
		else_if = {
			limit = {
				has_idea = Friendship_of_Peoples_Science_3
			}
			swap_ideas = {
				remove_idea = Friendship_of_Peoples_Science_3
				add_idea = Friendship_of_Peoples_Science_4
			}
		}
		else_if = {
			limit = {
				has_idea = Friendship_of_Peoples_Science_4
			}
			swap_ideas = {
				remove_idea = Friendship_of_Peoples_Science_4
				add_idea = Friendship_of_Peoples_Science_5
			}
		}
	}
}

country_event = {
	# Shared Welfare Programs Upgrade
	id = shared.102
	title = shared.102.t
	desc = shared.102.d

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		name = shared.102.a
		if = {
			limit = {
				has_idea = Friendship_of_Peoples_Welfare_Programs_1
			}
			swap_ideas = {
				remove_idea = Friendship_of_Peoples_Welfare_Programs_1
				add_idea = Friendship_of_Peoples_Welfare_Programs_2
			}
		}
		else_if = {
			limit = {
				has_idea = Friendship_of_Peoples_Welfare_Programs_2
			}
			swap_ideas = {
				remove_idea = Friendship_of_Peoples_Welfare_Programs_2
				add_idea = Friendship_of_Peoples_Welfare_Programs_3
			}
		}
		else_if = {
			limit = {
				has_idea = Friendship_of_Peoples_Welfare_Programs_3
			}
			swap_ideas = {
				remove_idea = Friendship_of_Peoples_Welfare_Programs_3
				add_idea = Friendship_of_Peoples_Welfare_Programs_4
			}
		}
		else_if = {
			limit = {
				has_idea = Friendship_of_Peoples_Welfare_Programs_4
			}
			swap_ideas = {
				remove_idea = Friendship_of_Peoples_Welfare_Programs_4
				add_idea = Friendship_of_Peoples_Welfare_Programs_5
			}
		}
	}
}

country_event = {
	# Shared Military Upgrade
	id = shared.103
	title = shared.103.t
	desc = shared.103.d

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		name = shared.103.a
		if = {
			limit = {
				has_idea = Friendship_of_Peoples_Para_Bellum_1
			}
			swap_ideas = {
				remove_idea = Friendship_of_Peoples_Para_Bellum_1
				add_idea = Friendship_of_Peoples_Para_Bellum_2
			}
		}
		else_if = {
			limit = {
				has_idea = Friendship_of_Peoples_Para_Bellum_2
			}
			swap_ideas = {
				remove_idea = Friendship_of_Peoples_Para_Bellum_2
				add_idea = Friendship_of_Peoples_Para_Bellum_3
			}
		}
		else_if = {
			limit = {
				has_idea = Friendship_of_Peoples_Para_Bellum_3
			}
			swap_ideas = {
				remove_idea = Friendship_of_Peoples_Para_Bellum_3
				add_idea = Friendship_of_Peoples_Para_Bellum_4
			}
		}
		else_if = {
			limit = {
				has_idea = Friendship_of_Peoples_Para_Bellum_4
			}
			swap_ideas = {
				remove_idea = Friendship_of_Peoples_Para_Bellum_4
				add_idea = Friendship_of_Peoples_Para_Bellum_5
			}
		}
	}
}

country_event = {
	# Shared Political Upgrade
	id = shared.104
	title = shared.104.t
	desc = shared.104.d

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		name = shared.104.a
		if = {
			limit = {
				has_idea = Friendship_of_Peoples_Politics_1
			}
			swap_ideas = {
				remove_idea = Friendship_of_Peoples_Politics_1
				add_idea = Friendship_of_Peoples_Politics_2
			}
		}
		else_if = {
			limit = {
				has_idea = Friendship_of_Peoples_Politics_2
			}
			swap_ideas = {
				remove_idea = Friendship_of_Peoples_Politics_2
				add_idea = Friendship_of_Peoples_Politics_3
			}
		}
		else_if = {
			limit = {
				has_idea = Friendship_of_Peoples_Politics_3
			}
			swap_ideas = {
				remove_idea = Friendship_of_Peoples_Politics_3
				add_idea = Friendship_of_Peoples_Politics_4
			}
		}
		else_if = {
			limit = {
				has_idea = Friendship_of_Peoples_Politics_4
			}
			swap_ideas = {
				remove_idea = Friendship_of_Peoples_Politics_4
				add_idea = Friendship_of_Peoples_Politics_5
			}
		}
	}
}

country_event = {
	# Shared Espionage Upgrade
	id = shared.105
	title = shared.105.t
	desc = shared.105.d

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		name = shared.105.a
		if = {
			limit = {
				has_idea = Friendship_of_Peoples_Espionage_1
			}
			swap_ideas = {
				remove_idea = Friendship_of_Peoples_Espionage_1
				add_idea = Friendship_of_Peoples_Espionage_2
			}
		}
		else_if = {
			limit = {
				has_idea = Friendship_of_Peoples_Espionage_2
			}
			swap_ideas = {
				remove_idea = Friendship_of_Peoples_Espionage_2
				add_idea = Friendship_of_Peoples_Espionage_3
			}
		}
		else_if = {
			limit = {
				has_idea = Friendship_of_Peoples_Espionage_3
			}
			swap_ideas = {
				remove_idea = Friendship_of_Peoples_Espionage_3
				add_idea = Friendship_of_Peoples_Espionage_4
			}
		}
		else_if = {
			limit = {
				has_idea = Friendship_of_Peoples_Espionage_4
			}
			swap_ideas = {
				remove_idea = Friendship_of_Peoples_Espionage_4
				add_idea = Friendship_of_Peoples_Espionage_5
			}
		}
	}
}

country_event = {
	# Temporary Science Buff
	id = shared.106
	title = shared.106.t
	desc = shared.106.d

	is_triggered_only = yes
	hidden = yes
	option = {
		name = shared.106.a
		every_other_country = {
			limit = {
				is_in_faction_with = RCR
				NOT = {
					tag = BRC
					tag = WEC
					tag = SOC
					tag = FEC
					tag = SIC
					tag = NWC
					tag = NOC
				}
			}
			add_timed_idea = {
				idea = Friendship_of_Peoples_Give_Scientific_Help
				days = 180
			}
		}
		multiply_variable = {
			Scientific_Help_Multiplier = global.Helping_Countries_Science
		}
		add_dynamic_modifier = {
			modifier = Friendship_of_Peoples_Scientific_Help
			days = 180
		}
		add_timed_idea = {
			idea = Friendship_of_Peoples_Receive_Scientific_Help_0
			days = 180
		}
	}
}

country_event = {
	# Temporary Welfare Buff
	id = shared.107
	title = shared.107.t
	desc = shared.107.d

	is_triggered_only = yes
	hidden = yes
	option = {
		name = shared.107.a
		every_other_country = {
			limit = {
				is_in_faction_with = RCR
				NOT = {
					tag = BRC
					tag = WEC
					tag = SOC
					tag = FEC
					tag = SIC
					tag = NWC
					tag = NOC
				}
			}
			add_timed_idea = {
				idea = Friendship_of_Peoples_Give_Welfare_Programs_Help
				days = 180
			}
		}
		multiply_variable = {
			Welfare_Help_Multiplier = global.Helping_Countries_Welfare
		}
		add_dynamic_modifier = {
			modifier = Friendship_of_Peoples_Welfare_Help
			days = 180
		}
	}
}

country_event = {
	# Temporary Military Buff
	id = shared.108
	title = shared.108.t
	desc = shared.108.d

	is_triggered_only = yes
	hidden = yes
	option = {
		name = shared.108.a
		every_other_country = {
			limit = {
				is_in_faction_with = RCR
				NOT = {
					tag = BRC
					tag = WEC
					tag = SOC
					tag = FEC
					tag = SIC
					tag = NWC
					tag = NOC
				}
			}
			add_timed_idea = {
				idea = Friendship_of_Peoples_Give_Military_Help
				days = 180
			}
		}
		multiply_variable = {
			Military_Help_Multiplier = global.Helping_Countries_Military
		}
		add_dynamic_modifier = {
			modifier = Friendship_of_Peoples_Military_Help
			days = 180
		}
	}
}

country_event = {
	# Temporary Political Buff
	id = shared.109
	title = shared.109.t
	desc = shared.109.d

	is_triggered_only = yes
	hidden = yes
	option = {
		name = shared.109.a
		every_other_country = {
			limit = {
				is_in_faction_with = RCR
				NOT = {
					tag = BRC
					tag = WEC
					tag = SOC
					tag = FEC
					tag = SIC
					tag = NWC
					tag = NOC
				}
			}
			add_timed_idea = {
				idea = Friendship_of_Peoples_Give_Political_Help
				days = 180
			}
		}
		multiply_variable = {
			Political_Help_Multiplier = global.Helping_Countries_Political
		}
		add_dynamic_modifier = {
			modifier = Friendship_of_Peoples_Political_Help
			days = 180
		}
	}
}

country_event = {
	# Temporary Espionage Buff
	id = shared.110
	title = shared.110.t
	desc = shared.110.d

	is_triggered_only = yes
	hidden = yes
	option = {
		name = shared.110.a
		every_other_country = {
			limit = {
				is_in_faction_with = RCR
				NOT = {
					tag = BRC
					tag = WEC
					tag = SOC
					tag = FEC
					tag = SIC
					tag = NWC
					tag = NOC
				}
			}
			add_timed_idea = {
				idea = Friendship_of_Peoples_Give_Espionage_Help
				days = 180
			}
		}
		multiply_variable = {
			Espionage_Help_Multiplier = global.Helping_Countries_Espionage
		}
		add_dynamic_modifier = {
			modifier = Friendship_of_Peoples_Espionage_Help
			days = 180
		}
	}
}

country_event = {
	# Voting
	id = shared.111
	title = shared.111.t
	desc = shared.111.d

	is_triggered_only = yes
	option = {
		name = shared.111.a
		add_to_variable = {
			global.International_Votes = 1
		}
	}
	# option = {
	# 	name = shared.111.b
	# 	add_to_variable = {
	# 		global.International_Votes = -1
	# 	}
	# }
	# option = {
	# 	name = shared.111.c
	# }
}

country_event = {
	# Votes Are Counted
	id = shared.114
	title = shared.114.t
	desc = shared.114.d

	is_triggered_only = yes
	hidden = yes
	option = {
		name = shared.114.a
		if = {
			limit = {
				check_variable = {
					global.International_Votes > 0
				}
			}
			country_event = shared.119
		}
		else = {
			country_event = shared.118
		}
	}
}

country_event = {
	# Mark offering country 
	id = shared.115
	title = shared.115.t
	desc = shared.115.d

	is_triggered_only = yes
	hidden = yes
	option = {
		name = shared.115.a
		ROOT = {
			set_country_flag = Internationale_resolution_offered
		}
	}
}

country_event = {
	# Type of boon
	id = shared.116
	title = shared.116.t
	desc = shared.116.d

	is_triggered_only = yes

	option = {
		name = shared.116.a #scientific boon
		set_variable = {
			global.International_Temporary_Boon = 1
		}
	}
	option = {
		name = shared.116.b #welfare boon
		set_variable = {
			global.International_Temporary_Boon = 2
		}
	}
	option = {
		name = shared.116.c #military boon
		set_variable = {
			global.International_Temporary_Boon = 3
		}
	}
	option = {
		name = shared.116.e #political boon
		set_variable = {
			global.International_Temporary_Boon = 4
		}
	}
	option = {
		name = shared.116.f #espionage_boon
		set_variable = {
			global.International_Temporary_Boon = 5
		}
	}
}

country_event = {
	# Decision is Reached - Boon is Granted
	id = shared.117
	title = shared.117.t
	desc = shared.117.d

	is_triggered_only = yes
	hidden = yes
	option = {
		name = shared.117.a
		if = {
			limit = {
				check_variable = {
					global.International_Temporary_Boon = 1 # ID of object of discussion - there can be plenty of them
				}
			}
			every_country = {
				limit = {
					has_country_flag = Internationale_resolution_offered
				}
				country_event = shared.106
			}
		}
		else_if = {
			limit = {
				check_variable = {
					global.International_Temporary_Boon = 2 # ID of object of discussion - there can be plenty of them
				}
			}
			every_country = {
				limit = {
					has_country_flag = Internationale_resolution_offered
				}
				country_event = shared.107
			}
		}
		else_if = {
			limit = {
				check_variable = {
					global.International_Temporary_Boon = 3 # ID of object of discussion - there can be plenty of them
				}
			}
			every_country = {
				limit = {
					has_country_flag = Internationale_resolution_offered
				}
				country_event = shared.108
			}
		}
		else_if = {
			limit = {
				check_variable = {
					global.International_Temporary_Boon = 4 # ID of object of discussion - there can be plenty of them
				}
			}
			every_country = {
				limit = {
					has_country_flag = Internationale_resolution_offered
				}
				country_event = shared.109
			}
		}
		else_if = {
			limit = {
				check_variable = {
					global.International_Temporary_Boon = 5 # ID of object of discussion - there can be plenty of them
				}
			}
			every_country = {
				limit = {
					has_country_flag = Internationale_resolution_offered
				}
				country_event = shared.110
			}
		}
	}
}

country_event = {
	# Voting is Failed
	id = shared.118
	title = shared.118.t
	desc = shared.118.d

	is_triggered_only = yes

	option = {
		name = shared.118.a
	}
}

country_event = {
	# Voting is Successful
	id = shared.119
	title = shared.119.t
	desc = shared.119.d

	is_triggered_only = yes

	option = {
		name = shared.119.a
		if = {
			limit = {
				check_variable = {
					global.International_Temporary_Boon > 0
				}
			}
			country_event = shared.117
		}
	}
}